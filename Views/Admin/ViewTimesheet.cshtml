@model Timesheets_APP.ViewModels.TimesheetViewModel

@{
    ViewData["Title"] = $"Edit Timesheet for {Model.EmpName}";
    Layout = "_Layout";
}

<h2>@ViewData["Title"] (@Model.TsDate.ToString("yyyy-MM-dd"))</h2>
<form asp-action="ViewTimesheet" method="post">
  @Html.AntiForgeryToken()

  @* Hidden keys *@
  <input asp-for="TsId"  type="hidden" />
  <input asp-for="EmpId" type="hidden" />

  <div class="form-row mb-4">
    <div class="col-md-3">
      <label asp-for="StartTime">Shift Start</label>
      <input asp-for="StartTime"
             type="time"
             class="form-control" />
    </div>
    <div class="col-md-3">
      <label asp-for="EndTime">Shift End</label>
      <input asp-for="EndTime"
             type="time"
             class="form-control" />
    </div>
    <div class="col-md-3">
      <label asp-for="Approved">Approved?</label>
      <select asp-for="Approved"
              class="form-control">
        <option value="false">No</option>
        <option value="true">Yes</option>
      </select>
    </div>
  </div>

  <h4>Time Entries</h4>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>From</th>
        <th>To</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      @for (int i = 0; i < Model.Items.Count; i++)
      {
          <tr>
            <td>
                <input name="Items[@i].TimeFrom"
                       value="@Model.Items[i].TimeFrom24"
                       type="time"
                       class="form-control" />
            </td>
            <td>
                        <input asp-for="Items[@i].TimeOut"
                               value="@Model.Items[i].TimeFrom24"
                               type="time"
                               class="form-control" />
            </td>
            <td>
              <input asp-for="Items[@i].Description"
                     class="form-control" />
            </td>
            @* also post back each row’s key *@
            <input asp-for="Items[@i].TrId" type="hidden" />
          </tr>
      }
    </tbody>
  </table>

  <button type="submit" class="btn btn-primary">
    Save Changes
  </button>
  <a asp-action="Index" class="btn btn-secondary ml-2">
    Back to List
  </a>
</form>
